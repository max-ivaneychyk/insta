(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,n,e){t.exports=e(18)},16:function(t,n,e){},17:function(t,n,e){},18:function(t,n,e){"use strict";e.r(n);var a=e(0),o=e.n(a),r=e(4),i=e.n(r),s=(e(16),e(5)),c=e(6),u=e(9),l=e(7),m=e(8),p=e(1),d=e(2);e(17);function f(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),a=1;a<n;a++)e[a-1]=arguments[a];return new Promise(function(n,a){var o=[].concat(e,[n]);t.apply(void 0,Object(d.a)(o))})}function h(t){var n=t.media_type,e=t.media_url;t.caption,t.children,t.comments,t.permalink;return o.a.createElement("div",{className:"post-wrap"},"IMAGE"===n&&o.a.createElement("img",{src:e,alt:"Im",className:"post-image"}),"VIDEO"===n&&o.a.createElement("video",{src:e,alt:"Im",className:"post-image",controls:!0}))}var g=function(t){function n(t){var e;return Object(s.a)(this,n),(e=Object(u.a)(this,Object(l.a)(n).call(this,t))).state={posts:[]},e.loadPosts=e.loadPosts.bind(Object(p.a)(Object(p.a)(e))),e}return Object(m.a)(n,t),Object(c.a)(n,[{key:"onPushPosts",value:function(t){this.setState({posts:[].concat(Object(d.a)(this.state.posts),Object(d.a)(t))})}},{key:"loadPosts",value:function(){var t=this,n=window.FB;n.getLoginStatus(function(e){Promise.resolve(e).then(function(t){return"connected"===t.status?t:new Promise(function(t,e){n.login(t)})}).then(function(t){if("connected"!==t.status)throw new Error("Cant auth");return t}).then(function(t){return t.authResponse.accessToken}).then(function(t){return f(n.api,"me/accounts","get",{})}).then(function(t){return[t.data[1],t.data[2]]}).then(function(t){var e=t.map(function(t){return f(n.api,t.id.toString(),"get",{fields:"instagram_business_account"})});return Promise.all(e)}).then(function(t){return t.map(function(t){return t.instagram_business_account.id})}).then(function(t){var e=t.map(function(t){return f(n.api,"".concat(t,"/media"),"get",{})});return Promise.all(e)}).then(function(t){var e=[],a={fields:"id,media_type,media_url,owner,timestamp,like_count,caption,children,comments,permalink,shortcode,username"};return t.forEach(function(t){return e.push.apply(e,Object(d.a)(t.data))}),Promise.all(e.map(function(t){return f(n.api,t.id,"get",a)}))}).then(function(n){return t.onPushPosts(n)})})}},{key:"render",value:function(){var t=this.state.posts.map(function(t){return o.a.createElement(h,Object.assign({},t,{key:t.id.toString()}))});return o.a.createElement("div",{className:"App"},o.a.createElement("button",{scope:"public_profile,email,manage_pages,instagram_basic",onClick:this.loadPosts},"Load Posts"),t)}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.ba837a74.chunk.js.map